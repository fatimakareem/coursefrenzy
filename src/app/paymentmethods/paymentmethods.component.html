<div class="container-fluid margin-bottom-20">
  <div class="row my-5">
    <div class="margin-auto user-profile margin-top117">
      <div class="checkout">
        <div [className]="flipclass">
          <div class="flip">
            <div class="front">
              <div class="chip"></div>
              <div class="logo">
                <svg version="1.1" id="visa" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px" y="0px" width="47.834px" height="47.834px" viewBox="0 0 47.834 47.834" style="enable-background:new 0 0 47.834 47.834;">
                  <g>
                    <g>

                    </g>
                  </g>
                </svg>
              </div>

              <div class="card-holder" style="top: 29px;left: 221px;">
                <label>Nick Name</label>
                <div>{{form.controls.cardnickname.value}}</div>
              </div>
              <div class="card-holder">
                <label>Card Number</label>
                <div>{{form.controls.cardnumber.value}}{{form.controls.cardnumber4.value}}</div>
              </div>
              <div class="card-expiration-date">
                <label>Expiry Date</label>
                <div>{{form.controls.expirydate.value}}</div>
              </div>
            </div>
            <div class="back">
              <div class="strip"></div>
              <div class="logo">
                <svg version="1.1" id="visa" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px" y="0px" width="47.834px" height="47.834px" viewBox="0 0 47.834 47.834" style="enable-background:new 0 0 47.834 47.834;">
                  <g>
                    <g>

                    </g>
                  </g>
                </svg>

              </div>
              <div class="card-expiration-date">
                <label>Expiry Date</label>
                <div>{{form.controls.expirydate.value}}</div>
              </div>
              <div class="ccv">
                <label>CCV</label>
                <div>{{form.controls.ccv.value}}{{form.controls.ccv4.value}}</div>
              </div>
            </div>
          </div>
        </div>

        <form class="user-add-ingo-form width-of-inputs" [formGroup]="form">
          <mat-form-field>
            <mat-select placeholder="Type Card" [formControl]="var_type_atm" (change)="ShowButton(var_type_atm.value)">
              <mat-option *ngFor="let card_get_datat of card_opeation" [value]="card_get_datat.value">{{card_get_datat.viewValue}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field>
            <input matInput type="text" minlength="3" maxlength="14" placeholder="Card Nick Name" formControlName="cardnickname">
            <mat-error *ngIf="form.controls.cardnickname.touched && form.controls.cardnickname.invalid">
              <mat-error *ngIf="form.controls.cardnickname.errors.required">
                Nick name cannot be empty
              </mat-error>
              <mat-error *ngIf="form.controls.cardnickname.errors.minlength">
                Nick name must be atleast {{form.controls.cardnickname.errors.minlength.requiredLength}} characters
                long.
              </mat-error>
              <mat-error *ngIf="form.controls.cardnickname.errors.maxlength">
                Nick name must be at atmost {{form.controls.cardnickname.errors.maxlength.requiredLength}} characters
                long.
              </mat-error>
              <mat-error *ngIf="form.controls.cardnickname.hasError('pattern')">
                Card Holder Name must be only in Alphabet.
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="margin-top-30" *ngIf="cardnumber">
            <input matInput type="text" minlength="16" maxlength="16" placeholder="16 digit card number"
              formControlName="cardnumber">
            <mat-error *ngIf="form.controls.cardnumber.touched && form.controls.cardnumber.invalid">
              <mat-error *ngIf="form.controls.cardnumber.errors.required">
                Card number cannot be empty
              </mat-error>
              <mat-error *ngIf="form.controls.cardnumber.errors.minlength">
                Card number must be atleast {{form.controls.cardnumber.errors.minlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="form.controls.cardnumber.errors.maxlength">
                Card Number must be at atmost {{form.controls.cardnumber.errors.maxlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="form.controls.cardnumber.hasError('pattern')">
                Card number must be only in digits.
              </mat-error>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="margin-top-30" *ngIf="cardnumber4">
            <input matInput type="text" minlength="15" maxlength="15" placeholder="15 digit card number"
              formControlName="cardnumber4">
            <mat-error *ngIf="form.controls.cardnumber4.touched && form.controls.cardnumber4.invalid">
              <mat-error *ngIf="form.controls.cardnumber4.errors.required">
                Card number cannot be empty
              </mat-error>
              <mat-error *ngIf="form.controls.cardnumber4.errors.minlength">
                Card number must be atleast {{form.controls.cardnumber4.errors.minlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="form.controls.cardnumber4.errors.maxlength">
                Card Number must be at atmost {{form.controls.cardnumber4.errors.maxlength.requiredLength}} digits
                long.
              </mat-error>
              <mat-error *ngIf="form.controls.cardnumber4.hasError('pattern')">
                Card number must be only in digits.
              </mat-error>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="margin-top-30" *ngIf="ccv">
            <input matInput type="password" maxlength="3" minlength="3" placeholder="CCV No." formControlName="ccv">
            <mat-error *ngIf="form.controls.ccv.touched && form.controls.ccv.invalid">
              <mat-error *ngIf="form.controls.ccv.errors.required">
                CCV cannot be empty
              </mat-error>
              <mat-error *ngIf="form.controls.ccv.errors.minlength">
                CCV must be atleast {{form.controls.ccv.errors.minlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="form.controls.ccv.errors.maxlength">
                CCV must be at atmost {{form.controls.ccv.errors.maxlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="form.controls.ccv.hasError('pattern')">
                CCV must be only in digits.
              </mat-error>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="margin-top-30" *ngIf="ccv4">
            <input matInput type="password" maxlength="4" minlength="4" placeholder="CCV No." formControlName="ccv4">
            <mat-error *ngIf="form.controls.ccv4.touched && form.controls.ccv4.invalid">
              <mat-error *ngIf="form.controls.ccv4.errors.required">
                CCV cannot be empty
              </mat-error>
              <mat-error *ngIf="form.controls.ccv4.errors.minlength">
                CCV must be atleast {{form.controls.ccv4.errors.minlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="form.controls.ccv4.errors.maxlength">
                CCV must be at atmost {{form.controls.ccv4.errors.maxlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="form.controls.ccv4.hasError('pattern')">
                CCV must be only in digits.
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="margin-top-30">
            <input matInput placeholder="Expiry Date (MM/YYYY)" [textMask]="{mask: mask}" type="text" formControlName="expirydate">
            <mat-error *ngIf="form.controls.expirydate.touched && form.controls.expirydate.invalid">
              <mat-error *ngIf="form.controls.expirydate.errors.required">
                Expiry date cannot be empty
              </mat-error>
              <mat-error *ngIf="form.controls.expirydate.hasError('pattern')">
                Expiry date must be in MM/YYYY format.
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-slide-toggle [checked]="false" formControlName="check">Set as default payment method</mat-slide-toggle>
          <a class="user-add-ingo-form-btn margin-top-10" (click)="add()">Add</a>

        </form>

      </div>
    </div>

  </div>

  <div class="table-responsive margin-top-20">
    <table class="table payment-table">
      <thead>
        <tr>
          <th>Nick name</th>
          <th>Card Number</th>
          <th>Expiry Date</th>
          <th>Default Credit Card</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody *ngFor="let card of res">
        <tr>
          <td>{{card.nickname}}</td>
          <td>{{card.cardNumber}}</td>
          <td>{{card.expiryDate}}</td>
          <div *ngIf="!card.default; then uncheck else check"></div>
          <ng-template #check>
            <td><i class="fa fa-check"></i></td>
          </ng-template>
          <ng-template #uncheck>
            <td><i class="fas fa-times"></i></td>
          </ng-template>
          <!--<td><i class="fa fa-check"></i></td>-->
          <td>
            <a (click)="getSingleCard(card.id)" data-target="#edit-card-modal" data-toggle="modal">
              <i class="fa fa-edit"></i>
            </a>
          </td>
          <td>
            <a (click)="deleteSingleCard(card.id)">
              <i class="fa fa-trash"></i>
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
<div class="modal fade modal-form" id="edit-card-modal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <div class="form-1-header">
          <h1>Edit your Credit Card Information</h1>
        </div>
      </div>
      <div class="modal-body">

        <form class="user-add-ingo-form" [formGroup]="updateForm">
          <select placeholder="Type Card" class="model-select" [formControl]="edit_var_type_atm" (change)="Edit_Show_inputs(edit_var_type_atm.value)">
            <option *ngFor="let card_get_datat of card_opeation" [value]="card_get_datat.value">{{card_get_datat.viewValue}}</option>
          </select>
          <!-- <mat-form-field>
            <mat-select placeholder="Type Card" [formControl]="edit_var_type_atm" (change)="Edit_Show_inputs(edit_var_type_atm.value)">
          <mat-option *ngFor="let card_get_datat of card_opeation" [value]="card_get_datat.value">{{card_get_datat.viewValue}}</mat-option>
            </mat-select>
          </mat-form-field> -->
          <mat-form-field>
            <input matInput type="text" minlength="3" maxlength="14" placeholder="Card Nick Name" formControlName="cardnickname2">
            <mat-error *ngIf="updateForm.controls.cardnickname2.touched && updateForm.controls.cardnickname2.invalid">
              <mat-error *ngIf="updateForm.controls.cardnickname2.errors.required">
                Nick name cannot be empty
              </mat-error>
              <mat-error *ngIf="updateForm.controls.cardnickname2.errors.minlength">
                Nick name must be atleast {{updateForm.controls.cardnickname2.errors.minlength.requiredLength}}
                characters long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.cardnickname2.errors.maxlength">
                Nick name must be at atmost {{updateForm.controls.cardnickname2.errors.maxlength.requiredLength}}
                characters long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.cardnickname2.errors.cannotContainSpace">
                Nick name cannot contain spaces
              </mat-error>
            </mat-error>
          </mat-form-field>


          <mat-form-field class="margin-top-30" *ngIf="edit_cardnumber">
            <input matInput type="text" minlength="16" maxlength="16" placeholder="16 digit card number"
              formControlName="edit_cardnumber">
            <mat-error *ngIf="updateForm.controls.edit_cardnumber.touched && updateForm.controls.edit_cardnumber.invalid">
              <mat-error *ngIf="updateForm.controls.edit_cardnumber.errors.required">
                Card number cannot be empty
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_cardnumber.errors.minlength">
                Card number must be atleast {{updateForm.controls.edit_cardnumber.errors.minlength.requiredLength}}
                digits long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_cardnumber.errors.maxlength">
                Card Number must be at atmost {{updateForm.controls.edit_cardnumber.errors.maxlength.requiredLength}}
                digits long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_cardnumber.hasError('pattern')">
                Card number must be only in digits.
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="margin-top-30" *ngIf="edit_cardnumber2">
            <input matInput type="text" minlength="15" maxlength="15" placeholder="15 digit card number"
              formControlName="edit_cardnumber2">
            <mat-error *ngIf="updateForm.controls.edit_cardnumber2.touched && updateForm.controls.edit_cardnumber2.invalid">
              <mat-error *ngIf="updateForm.controls.edit_cardnumber2.errors.required">
                Card number cannot be empty
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_cardnumber2.errors.minlength">
                Card number must be atleast {{updateForm.controls.edit_cardnumber2.errors.minlength.requiredLength}}
                digits long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_cardnumber2.errors.maxlength">
                Card Number must be at atmost {{updateForm.controls.edit_cardnumber2.errors.maxlength.requiredLength}}
                digits long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_cardnumber2.hasError('pattern')">
                Card number must be only in digits.
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="margin-top-30" *ngIf="edit_ccv2">
            <input matInput type="password" maxlength="4" minlength="4" placeholder="CCV No." formControlName="edit_ccv2">
            <mat-error *ngIf="updateForm.controls.edit_ccv2.touched && updateForm.controls.edit_ccv2.invalid">
              <mat-error *ngIf="updateForm.controls.edit_ccv2.errors.required">
                CCV cannot be empty
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_ccv2.errors.minlength">
                CCV must be atleast {{updateForm.controls.edit_ccv2.errors.minlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_ccv2.errors.maxlength">
                CCV must be at atmost {{updateForm.controls.edit_ccv2.errors.maxlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_ccv2.hasError('pattern')">
                CCV must be only in digits.
              </mat-error>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="margin-top-30" *ngIf="edit_ccv3">
            <input matInput type="password" maxlength="3" minlength="3" placeholder="CCV No." formControlName="edit_ccv3">
            <mat-error *ngIf="updateForm.controls.edit_ccv3.touched && updateForm.controls.edit_ccv3.invalid">
              <mat-error *ngIf="updateForm.controls.edit_ccv3.errors.required">
                CCV cannot be empty
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_ccv3.errors.minlength">
                CCV must be atleast {{updateForm.controls.edit_ccv3.errors.minlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_ccv3.errors.maxlength">
                CCV must be at atmost {{updateForm.controls.edit_ccv3.errors.maxlength.requiredLength}} digits long.
              </mat-error>
              <mat-error *ngIf="updateForm.controls.edit_ccv3.hasError('pattern')">
                CCV must be only in digits.
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="margin-top-30">
            <input matInput placeholder="Expiry Date (MM/YYYY)" [textMask]="{mask: mask}" type="text" formControlName="expirydate2">
            <mat-error *ngIf="updateForm.controls.expirydate2.touched && updateForm.controls.expirydate2.invalid">
              <mat-error *ngIf="updateForm.controls.expirydate2.errors.required">
                Expiry date cannot be empty
              </mat-error>
              <mat-error *ngIf="updateForm.controls.expirydate2.hasError('pattern')">
                Expiry date must be in MM/YYYY format.
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-slide-toggle class="margin-top-30" formControlName="check2">Set as default payment method</mat-slide-toggle>
          <a class="user-add-ingo-form-btn margin-top-10" (click)="updateSingleCard(cardid)">Update</a>
        </form>
      </div>
    </div>
  </div>
</div>